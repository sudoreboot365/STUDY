Client OS (AKA sending host AKA connection initiator)
- Layer 4
	- Assign either (1) sending applications designated port or (2) ephemeral source port
- Layer 3
	- Check destination IP against its own routing table (maps IPs → next hop IPs + egress interface) 
	- It's own routing table only has 2 entries:
		- ex A. `192.168.10.0/24 dev eth0` - an entry that says 'all other devices on my local subnet'
		- ex B. `0.0.0.0/0 via 192.168.10.1 dev eth0` - an fallback entry which will be the longest matching prefix when no other entries found, an entry that says 'send to the default gateway'
	- in both (A) and (B), now it knows (1) the next-hop IP address and (2) egress interface, but it doesn't know the MAC address for layer 2 headers
- Layer 2
	- Checks the next-hop IP against its ARP cache (maps IPs → MAC addresses)
		- if not found, performs an ARP broadcast
			- Ethernet frame with EtherType = ARP and Dest MAC = ff:ff....
			- the switch receives it then floods it (AKA layer 2 broadcasts it) out all ports
				- although routers also receive this, they drop it
			- when hosts receive it, all drop except the target IP, who sends an ARP reply
		- if found, adds MAC address to layer 2 header, sends out, finished.

Layer 2 devices (usually Switches)
- Layer 4
	- Doesn't touch or interact with Layer 4 headers
- Layer 3
	- Doesn't touch or interact with Layer 3 headers
- Layer 2
	- Looks at the destination MAC in layer 2 headers
	- If destination is broadcast, flood it out to all ports in same VLAN
	- if destination is not broadcast, checks it against its MAC table
		- MAC tables map MAC addresses → switch ports
		- MAC tables are built up passively over time by recording all incoming packets
	- If it doesn't find an entry,
		- flood the frame out all ports in the same VLAN.
		- eventually a reply will come from the right place, and so now the MAC table has the correct entry
	- If it finds matching entry, sends out, finished

Layer 3 devices (Routers, Firewalls, etc)
- Layer 4
	- Doesn't touch or interact with Layer 4 headers
- Layer 3
	- Check destination IP with Routing Table (maps longest matching prefix IPs → egress interface + next-hop IP)
	- also decrements TTL by 1 and re-calculates new checksum
	- for NAT routers, use NAT table to
		- if outbound packet, replace ( source private IP ↔  own public IP + port), called multiplex
		- if inbound packet, replace ( destination public IP + port ↔ private IP ), called demultiplex
- Layer 2
	- check next-hop IP against ARP table
	- if not found, ARP broadcast


## HTTP Codes
- 400 - bad request - probably bad syntax
- 401 - unauthorized - not authenticated
- 403 - forbidden - authenticated, but no permission to access
- 404 - not found - url incorrect
- 408 - timeout 
- 500 - generic error
- 503 - server busy/down for maintenance
- 200 - success
- 201 - POST request fulfilled

## VPN
1. GRE - creates tunnel. Completely insecure, only changed source and destination headers
2. IPSec - suite of tools to secure network traffic
	1. IKE - management/control plane
		1. Authenticate each other 
		2. Agree upon secret shared key 
		3. All these IKE communications are checked for integrity 
		4. Algorithms used:
			1. Authentication + Integrity: RSA + PKI (public key infrastructure) + SHA-256 (hashing)
			2. Shared secret key: Diffie-Hellman over UDP/500
	2. Data plane 
		1. Transport mode (Encapsulate the payload only) or Tunnel mode (Encapsulate the payload + headers)
		2. AH mode (Auth + Integ) or ESP mode (Auth + Integ + Encryption)
		3. VPNs always use (Tunnel Mode + ESP mode)
		4. Algorithms used:
			1. Authentication + Integrity: HMAC + shared secret key negotiated in prior IKE phase + SHA-256
			2. Encryption: AES

## Digital Signatures
- Sender sends 3 things
	- original data
	- digital signature of data = `RSAencrypt(sendersPrivateKey, SHA256(data))`
	- digital certificate containing sender's public key
- Receiver does 2 things:
	- extract sender's public key from the digital certificate
	- check if `RSAdecrypt(sendersPublicKey, digitalSignature) = SHA256(data))`

| **CAT** | **max rated speed** | **max rated distance** | **shielding** | **addt'l capable**            |
| ------- | ------------------- | ---------------------- | ------------- | ----------------------------- |
| 5       | 100mb               | 100m                   | UTP/STP       | but also 1g capable over 100m |
| 5e      | 1g                  | 100m                   | UTP/STP       |                               |
| 6       | 1g                  | 100m                   | UTP/STP       | but also 10g capable over 55m |
| 6a      | 10g                 | 100m                   | UTP/STP       |                               |
| 7       | 10g                 | 100m                   | S/FTP only    |                               |
| 8       | 40g                 | 30m                    | S/FTP only    |                               |

|                    | IEEE Standard | Max. Power | Twisted Pairs Used | Cable Requirement | Common Devices                                        |
| ------------------ | ------------- | ---------- | ------------------ | ----------------- | ----------------------------------------------------- |
| **PoE (Type 1)**   | 802.3af       | 15.4W      | 2-Pair             | Cat3 or better    | VoIP phones, simple IP cameras                        |
| **PoE+ (Type 2)**  | 802.3at       | 25.5W      | 2-Pair             | Cat5 or better    | Video IP phones, Pan-Tilt-Zoom cameras, advanced WAPs |
| **PoE++ (Type 3)** | 802.3bt       | 51W        | 4-Pair             | Cat5e or better   | Video conferencing systems, laptops, digital signage  |
| **PoE++ (Type 4)** | 802.3bt       | 71W        | 4-Pair             | Cat5e or better   | Video conferencing systems, laptops, digital signage  |

| **Class**     | **first 4 binary bits** | **first decimal byte** | **Subnet Mask**      | **Network/Host bits**    | **Private range** |
| ------------- | ----------------------- | ---------------------- | -------------------- | ------------------------ | ----------------- |
| A             | 0xxx                    | [0-127].x.x.x          | 255.0.0.0 or /8      | 8/24                     | 10.x.x.x          |
| B             | 10xx                    | [128-191].x.x.x        | 255.255.0.0 or /16   | 16/16                    | 172.[16-31].x.x   |
| C             | 110x                    | [192-223].x.x.x        | 255.255.255.0 or /24 | 24/8                     | 192.168.x.x       |
| D (multicast) | 1110                    | [224-239].x.x.x        |                      | all 32 bits define group |                   |
| E (reserved)  | 1111                    | [240-255].x.x.x        |                      |                          |                   |

| Name                      | Colloquial Name     | Speed    | Cable                          | Light Source           |
| :------------------------ | :------------------ | :------- | :----------------------------- | :--------------------- |
| **Twisted-Pair (Copper)** |                     |          |                                |                        |
| 10BASE-T                  | Ethernet            | 10 Mbps  | Cat3 or higher                 | N/A                    |
| 100BASE-TX                | Fast Ethernet       | 100 Mbps | Cat5 or higher                 | N/A                    |
| 1000BASE-T                | Gigabit Ethernet    | 1 Gbps   | Cat5e or higher                | N/A                    |
| 10GBASE-T                 | 10 Gigabit Ethernet | 10 Gbps  | Cat6 (55m), Cat6A (100m)       | N/A                    |
| **Fiber Optic**           |                     |          |                                |                        |
| 100BASE-FX                | Fast Ethernet       | 100 Mbps | Multimode Fiber (MMF)          | LED                    |
| 1000BASE-SX               | Gigabit Ethernet    | 1 Gbps   | Multimode Fiber (MMF)          | Short-wavelength laser |
| 1000BASE-LX               | Gigabit Ethernet    | 1 Gbps   | MMF or Single-mode Fiber (SMF) | Long-wavelength laser  |
| 10GBASE-SR                | 10 Gigabit Ethernet | 10 Gbps  | MMF                            | Short-range laser      |
| 10GBASE-LR                | 10 Gigabit Ethernet | 10 Gbps  | SMF                            | Long-range laser       |